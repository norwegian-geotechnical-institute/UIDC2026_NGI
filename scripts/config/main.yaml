defaults: #points to sub-configs
  - model: xgboost.yaml # knn.yaml
  - _self_ # main overrides sub-cfg in case of duplicates

# EXPERIMENT CONFIG
#####################################################################

# NOTE: hydra configs are not passed on to cfg and don't need schema
hydra:
  run:
    dir: ./experiments/hydra_outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: ./experiments/hydra_outputs/multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}

experiment:
  save_model: False
  seed: 3
  train_fraction: 0.75
  features: [
      "T(P,V/N)-b1",
      "T(P,V/N)-b2",
      "T(P,V/N)-a",
      "T(P,V/N)-R2",
      "T(V/N)-b",
      "T(V/N)-a",
      "T(V/N)-R2",
      "P(V)-slope",
      "P(V)-a",
      "P(V)-R2",
      "Wp(WT)-slope",
      "Wp(WT)-a",
      "Wp(WT)-R2",
      "T(P)-slope",
      "T(P)-a",
      "T(P)-R2",
      "T-m",
      "T-slope",
      "T-R2",
      "P-m",
      "P-slope",
      "P-R2",
      "V-m",
      "V-slope",
      "V-R2",
      "Vs-m",
      "Vs-slope",
      "TN-m",
      "TN-slope",
      "TN-R2",
      "PV-m",
      "PV-slope",
      "PV-R2",
      "V/N-m",
      "V/N-slope",
      "V/N-R2",
      "N-m",
      "Ns-m",
      "I-m",
      "V0-m",
      "V/Vs-min",
      "T/P-min",
      "T/P-max",
      "T/P-m",
      "T/P-std",
      # "Tpi-min",
      # "Tpi-max",
      # "Tpi-m",
      # "Tpi-std",
      # "Fpi-min",
      # "Fpi-max",
      # "Fpi-m",
      # "Fpi-std",
      # "Tpi-slope",
      # "Tpi-R2:1-sse/sst",
      "WT/WP-slope",
      "WT/WP-R2:1-sse/sst",
      "T(P*V/N)-slope",
      "T(P*V/N)-a",
      "T(P*V/N)-R2",
      # "Fpi",
      "P*V/N",
      "T/P",
      # "Tpi",
      # "dt",
      # "dz",
      "workP",
      "workT",
      "Total T",
      "Total F",
      "RPM",
      "Pr",
      "p",
    ]
  site_info: []
  label: "collapse"
  undersample_level: null  # Set to absolute number to override ratio, or null to use ratio
  undersample_ratio: 1.0  # Ratio of majority:minority (1.0 = 1:1 ratio, 2.0 = 2:1, etc.)
  oversample_level: 0
  tbm_classification:
    0: regular
    1: collapse
  cost_matrix:
    # Cost values normalized to time per regular advance
    # These represent the cost/impact of each prediction outcome as a multiple of regular advance time
    tn_cost: 1.0 # True Regular (TR): Correctly predicted regular excavation (1x regular advance time)
    fp_cost: 10.0 # False Collapse (FC): False alarm - predicted collapse but was regular (investigation time, delays)
    fn_cost: 240.0 # False Regular (FR): Missed collapse - predicted regular but was collapse (equipment damage, safety risk, major delays)
    tp_cost: 10.0 # True Collapse (TC): Correctly predicted collapse (response and investigation cost)
    time_per_regular_advance: 1.0 # Time in hours for a regular advance (multiplier to convert to absolute time)

  # Color scheme for confusion matrix and analysis plots
  # Colors correspond to: TR (True Regular), FC (False Collapse), FR (False Regular), TC (True Collapse)
  confusion_matrix_colors:
    tn_color: "#76B644" # True Regular (TR) - Light green
    fp_color: "#FCB518" # False Collapse (FC) - Gold/Yellow
    fn_color: "#EF4927" # False Regular (FR) - Red
    tp_color: "#1B9AD7" # True Collapse (TC) - Teal/Cyan

preprocess:
  outlier_feature: ""
  remove_duplicates: True
  remove_outliers_hard: False
  remove_outliers_uni: False
  remove_outliers_multi: True
  univariate_threshold: 3
  multivariate_threshold: 0.5

dataset:
  path_raw: ./data/raw/
  path_intermediate: ./data/intermediate
  path_model_ready: ./data/model_ready
  path_raw_dataset: ${dataset.path_raw}/combined_data.csv
  path_model_ready_train: ${dataset.path_model_ready}/dataset_train.csv
  path_model_ready_test: ${dataset.path_model_ready}/dataset_test.csv

mlflow:
  path: ./experiments/mlruns
  experiment_name: null # is set when calling scripts

optuna:
  n_trials: 100
  cv_folds: 5
  path_results: experiments/hyperparameters
